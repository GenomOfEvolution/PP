### Зависимость приоритетов потоков от количества ядер

Приоритеты потоков определяют **относительную долю процессорного времени**, которое получит поток при конкуренции за ресурсы. Однако их влияние напрямую зависит от соотношения количества потоков и физических ядер:

#### Ключевые принципы:
1. **Приоритеты работают только при конкуренции**: Если ядер достаточно для всех активных потоков, приоритеты не влияют на производительность.
2. **Высокий приоритет ≠ больше скорости**: Поток с высоким приоритетом получает преимущество только когда система перегружена.
3. **Опасность голодания**: Низкоприоритетные потоки могут почти не получать времени на выполнение при высокой загрузке.

---

### Анализ случаев

#### **1) 3 потока с одинаковым приоритетом (Normal)**
| Ядра | Поведение |
|-------|-----------|
| **1 ядро** | Планировщик равномерно распределяет время между потоками (каждый получает ~33% времени). Частые переключения контекста снижают общую производительность. |
| **2 ядра** | Два потока работают параллельно, третий ждет в очереди. Когда один из активных потоков завершает квант времени (~15-30 мс в Windows), третий поток получает свободное ядро. |
| **3 ядра** | Идеальный параллелизм: каждый поток выполняется постоянно без переключений. Максимальная производительность. |

---

#### **2) 3 поток: 1 (Above_Normal), 2+3 (Normal)**
| Ядра | Поведение |
|-------|-----------|
| **1 ядро** | Поток 1 получает **~50-60% времени**, потоки 2-3 делят оставшееся время (~20-25% каждый). Высокий риск голодания низкоприоритетных потоков при длительной работе. |
| **2 ядра** | Поток 1 и один из Normal-потоков работают параллельно. Второй Normal-поток получает время только когда:<br>- Поток 1 завершает квант<br>- Освобождается ядро из-за блокировки потока 1 |
| **3 ядра** | Все потоки выполняются параллельно. Приоритеты **не влияют** на производительность (нет конкуренции). |

---

#### **3) 3 потока: 1 (Above_Normal), 2 (Normal), 3 (Below_Normal)**
| Ядра | Поведение |
|-------|-----------|
| **1 ядро** | Критическое неравенство:<br>- Поток 1: **~70% времени**<br>- Поток 2: **~25%**<br>- Поток 3: **~5% или меньше**<br>Низкоприоритетный поток может "зависнуть" на секунды при высокой нагрузке. |
| **2 ядра** | Оптимальное распределение:<br>- Ядро 1: Поток 1 (Above_Normal)<br>- Ядро 2: Поток 2 (Normal)<br>Поток 3 (Below_Normal) получает время только при простое ядер (редко). |
| **3 ядра** | Все потоки работают параллельно. Приоритеты **никак не влияют** на скорость выполнения. |
